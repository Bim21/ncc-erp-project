
<div class="card mt-3">
            <div class="card-header">
                <div class="row">
                    <div class="col-md-6">
                        <h3>Thông tin chung</h3>
                    </div>
                    <div class="col-6 text-right ">
                        <a *ngIf="permission.isGranted(PmManager_Project_Update)" class="btn bg-primary  mt-3" [hidden]="!readMode"  (click)="editRequest()">
                            <i class="fas fa-edit"></i>
                            Edit
                        </a>
                    </div>
                    </div>
                </div>


            <div class="card-body table-responsive p-4">
                <form class="form-horizontal" autocomplete="off" #requestDetail="ngForm">
                    <div class="form-group row detail ">
                        <label class="col-md-2 col-form-label" for="requestName">
                          Tên dự án:
                        </label>
                        <div *ngIf="readMode" class="col-md-4 mt-2">
                                <p>{{project.name}}</p>
                        </div>
                        <div *ngIf="!readMode" class="col-md-5">
                            <input type="text" class="form-control" name="projectName" id="projectName" minlength="2" maxlength="64"
                                required [(ngModel)]="project.name" #projectNameModel="ngModel" #projectNameEl />
                            <abp-validation-summary [control]="projectNameModel" [controlEl]="projectNameEl">
                            </abp-validation-summary>
                        </div>
                    </div>
                    <div class="form-group row detail ">
                        <label class="col-md-2 col-form-label" for="projectCode">
                          Code:
                        </label>
                        <div *ngIf="readMode" class="col-md-4 mt-2">
                                <p>{{project.code}}</p>
                        </div>
                        <div *ngIf="!readMode" class="col-md-5">
                            <input type="text" class="form-control" name="projectCode" id="projectCode"
                                required [(ngModel)]="project.code" #projectCode="ngModel" #projectCodeEl />
                            <abp-validation-summary [control]="projectCode" [controlEl]="projectCodeEl">
                            </abp-validation-summary>
                        </div>
                    </div>
                    <div class="form-group row detail ">
                        <label class="col-md-2 col-form-label" for="projectPM">
                          PM:
                        </label>
                        <div *ngIf="readMode" class="col-md-4 mt-2">
                                <p>{{project.pmFullName}}</p>
                        </div>
                        <div *ngIf="!readMode" class="col-md-5 ">
                            <mat-form-field class="w-100" appearance="outline">
                                <mat-select [(ngModel)]="project.pmId" name="projectPM" placeholder="select a PM" required
                                    #projectPM="ngModel">
                                    <mat-option *ngFor="let pm of pmList" [value]="pm.id">
                                        {{pm.fullName}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                            <mat-error class="mt-1" *ngIf="projectPM.hasError('required') && projectPM.touched"
                                style="font-size: 13px;">
                                This field is required
                            </mat-error>
                        </div>
                    </div>
                    <div class="form-group row detail ">
                        <label class="col-md-2 col-form-label" for="requestName">
                           Loại dự án:
                        </label>
                        <div *ngIf="readMode" class="col-md-4 mt-2">
                           <span [ngClass]="APP_CONST.ProjectTypeStyle[getByEnum(project.projectType , APP_ENUM.ProjectType)]"  >{{getByEnum(project.projectType , APP_ENUM.ProjectType)}}</span>
                        </div>
                        <div *ngIf="!readMode" class="col-md-5 ">
                            <mat-form-field class="w-100" appearance="outline">
                                <mat-select [(ngModel)]="project.projectType" name="projectType" placeholder="select a project type"
                                    required #projectType="ngModel">
                                    <ng-container *ngFor="let projectType of projectTypeList">
                                        <mat-option [value]="APP_ENUM.ProjectType[projectType]">
                                            {{ changeTextProjectType(projectType) }}</mat-option>
                                    </ng-container>
                                </mat-select>
                            </mat-form-field>
                            <mat-error class="mt-1" *ngIf="projectType.hasError('required') && projectType.touched"
                                style="font-size: 13px;">
                                This field is required
                            </mat-error>
                        </div>
                    </div>
                    <div class="form-group row detail ">
                        <label class="col-md-2 col-form-label" for="requestName">
                           Trạng thái:
                        </label>
                        <div *ngIf="readMode" class="col-md-4 mt-2">
                            <p [ngClass]="APP_CONST.statusStyle[getByEnum(project.status, APP_ENUM.ProjectStatus)]">{{getByEnum(project.status, APP_ENUM.ProjectStatus)}}</p>

                        </div>
                        <div *ngIf="!readMode" class="col-md-5 ">
                            <mat-form-field class="w-100" appearance="outline">
                                <mat-select [(ngModel)]="project.status" name="projectStatus" placeholder="select a project status"
                                    required #projectStatus="ngModel">
                                    <ng-container *ngFor="let status of projectStatusList">
                                        <mat-option [value]="APP_ENUM.ProjectStatus[status]">
                                            {{status}}</mat-option>
                                    </ng-container>
                                </mat-select>
                            </mat-form-field>
                            <mat-error class="mt-1" *ngIf="projectStatus.hasError('required') && projectStatus.touched"
                                style="font-size: 13px;">
                                This field is required
                            </mat-error>
                        </div>
                    </div>
                    <div class="form-group row detail ">
                        <label class="col-md-2 col-form-label" for="requestName">
                            Khách hàng:
                        </label>
                        <div *ngIf="readMode" class="col-md-4 mt-2">
                                <p>{{project.clientName}}</p>
                        </div>
                        <div *ngIf="!readMode"  class="col-md-5 ">
                            <mat-form-field class="w-100" appearance="outline">
                                <mat-select [(ngModel)]="project.clientId" name="client" placeholder="select customer" required
                                    #client="ngModel">
                                    <mat-option *ngFor="let client of clientList" [value]="client.id">
                                        {{client.name}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                            <mat-error class="mt-1" *ngIf="client.hasError('required') && client.touched" style="font-size: 13px;">
                                This field is required
                            </mat-error>
                        </div>
                    </div>
                    <div class="form-group row detail">
                       <label class="col-md-2 col-form-label" for="payCurrent">
                            Pay Currency:
                       </label>
                       <div *ngIf="readMode" class="col-md-4 mt-2">
                            <p>{{project.currencyName}}</p>
                        </div>
                        <div *ngIf="!readMode"  class="col-md-5 ">
                            <mat-form-field class="w-100" appearance="outline">
                                <mat-select [(ngModel)]="project.currencyId" name="currency" placeholder="Select currency" required
                                    #currency="ngModel">
                                    <mat-option *ngFor="let currency of currencyList" [value]="currency.id">
                                        {{currency.name}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                            <!-- <mat-error class="mt-1" *ngIf="currency.hasError('required') && currency.touched" style="font-size: 13px;">
                                This field is required
                            </mat-error> -->
                        </div>
                    </div>
                    <div class="form-group row detail mb-1">
                        <label class="col-md-2 col-form-label" for="requestName">
                            Vẫn Charge Khách hàng:
                        </label>
                        <div *ngIf="readMode" class="col-md-5 pt-2">

                            <mat-checkbox disabled="true" [(ngModel)]="project.isCharge" name="ischarge">
                            </mat-checkbox>

                        </div>
                        <div *ngIf="!readMode" class="col-md-5 pt-2">
                            <mat-checkbox [(ngModel)]="project.isCharge" (change)="checkValue($event)" name="ischarge" class="mt-1">is Charge
                            </mat-checkbox>
                    <span><i class="fas fa-question-circle showText ml-1 mb-1"></i></span>

                        </div>
                    </div>
                    <div class="form-group row detail mb-1" *ngIf="project.isCharge">
                        <label class="col-md-2 col-form-label" for="requestName">
                            Charge Type :
                        </label>
                        <div *ngIf="readMode" class="col-md-4 mt-2">
                            <p>{{getByEnum(project.chargeType , APP_ENUM.ChargeType)}}</p>
                        </div>
                        <div *ngIf="!readMode" class="col-md-5 pt-2">
                            <mat-form-field class="w-100" appearance="outline">
                                <mat-select [(ngModel)]="project.chargeType" name="chargeType" placeholder="Select charge type"  #currency="ngModel">
                                    <mat-option *ngFor="let type of chargeTypeList" [value]="APP_ENUM.ChargeType[type]">
                                        {{type}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="form-group row detail ">
                        <label class="col-md-2 col-form-label" for="requestName">
                            Thời gian bắt đầu:
                        </label>
                        <div *ngIf="readMode" class="col-md-4 mt-2">
                           <p>{{project.startTime |date:"dd/MM/yyyy"}}</p>
                        </div>
                        <div *ngIf="!readMode" class="col-md-5 datepick">
                            <mat-form-field appearance="outline">
                                <input matInput [matDatepicker]="picker" [(ngModel)]="project.startTime" placeholder="choose a date"
                                    required name="startTime">
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>
                            <!-- <mat-error class="mt-1" *ngIf="picker.hasError('required') && picker.touched"
                            style="font-size: 13px;">
                            This field is required
                        </mat-error> -->
                        </div>
                    </div>
                    <div class="form-group row detail ">
                        <label class="col-md-2 col-form-label" for="requestName">
                            Thời gian kết thúc:
                        </label>
                        <div *ngIf="readMode" class="col-md-4 mt-2">
                            <p>{{project.endTime |date:"dd/MM/yyyy"}}</p>
                        </div>
                        <div *ngIf="!readMode" class="col-md-5 datepick">
                            <mat-form-field appearance="outline">
                                <input matInput [matDatepicker]="picker2" [(ngModel)]="project.endTime" placeholder="choose a date"
                                    name="endTime">
                                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                <mat-datepicker #picker2></mat-datepicker>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="form-group row" [hidden]="readMode">
                        <div class="form-group row d-flex justify-content-between">
                            <button class="btn btn-default mx-2" (click)="readMode = true; getProjectDetail()">
                                Cancel
                            </button>
                            <button class="btn btn-primary" [disabled]="!requestDetail.valid || isLoading " (click)="saveAndClose()">
                                Save
                            </button>
                        </div>
                    </div>


                </form>

            </div>



        </div>

