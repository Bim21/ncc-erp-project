<section class="content px-2">
    <div class="container-fluid">
        <div class="card">
            <div class="card-header">
                <div class="row">
                    <div class="col-md-6">
                        <h3>Danh sách nhân viên</h3>
                    </div>
                    <div class="col-md-6">
                        <section class="example-section">
                            <mat-checkbox class="example-margin">Hiển thị thông tin lịch sử</mat-checkbox>
                        </section>
                    </div>
                </div>
            </div>
            <div class="card-body table-responsive p-4">
                <table style="border-collapse: collapse;" class="table table-hover text-nowrap" [busy]="isLoading">
                    <thead class="bg-light">
                        <tr>
                            <th>STT</th>
                            <th>Nhân viên</th>
                            <th>tên project</th>
                            <th>Project Role</th>
                            <th>Thời gian bắt đầu</th>
                            <th>Trạng thái</th>
                            <th>%Sử dụng nhân sự</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let user of projectUserList |paginate:{ 
                        itemsPerPage: 10,
                        currentPage: userListCurrentPage
                        }  ; let i = index">
                            <td><span>{{ i +1 }}</span></td>
                            <td><span *ngIf="!user.createMode">{{user.userName}}</span>
                                <input *ngIf="user.createMode" type="text" [(ngModel)]="user.userName">
                            </td>
                            <!-- <td><span *ngIf="!user.createMode">{{user.projectName}} </span>
                                <input *ngIf="user.createMode" type="text" [(ngModel)]="user.projectName">

                            </td> -->
                            <td> <span *ngIf="user.createMode">{{getValueByEnum(user.projectRole , APP_ENUM.ProjectUserRole)}}</span>
                                <input *ngIf="user.createMode" type="text" [(ngModel)]="user.projectRole">
                            </td>
                            <td> <span *ngIf="!user.createMode">
                                {{user.startTime | date:"dd/MM/yyyy"}}

                            </span>
                                <mat-form-field appearance="outline" *ngIf="user.createMode">
                                    <input matInput [matDatepicker]="picker" placeholder="chose a date" [(ngModel)]="user.startTime"
                                        name="usercreateDate">
                                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                    <mat-datepicker #picker></mat-datepicker>
                                </mat-form-field>
                            </td>
                            <td *ngIf="!user.createMode">{{ getValueByEnum(user.status, APP_ENUM.ProjectUserStatus)}}</td>
                            <td *ngIf="user.createMode">{{user.allocatePercentage}}</td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
                <button style="border: none;" (click)="addProjectUser()" class=" bg-blue mt-2">
                    <i class="fa fa-plus-square"></i>
                </button>
            </div>
            <pagination-controls (pageChange)="userListCurrentPage = $event"></pagination-controls>
        </div>
    </div>
</section>


<section class="content px-2">
    <div class="container-fluid">
        <div class="card">
            <div class="card-body table-responsive p-4">
                <h3>Request nhân sự</h3>
                <table style="border-collapse: collapse;" class="table table-hover text-nowrap" [busy]="isLoading">
                    <thead class="bg-light">
                        <tr>
                            <th>STT</th>
                            <th>Request name</th>
                            <th>Status</th>
                            <th>Description</th>
                            <th>Thời gian cần</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let request of projectResourceRequestList  |paginate:{
                        itemsPerPage: 10,
                        currentPage: resourceRequestCurrentPage
                        } ; let i = index">
                            <td><span>{{ i +1 }}</span></td>
                            <td>{{request.name}}</td>
                            <td>{{request.statusName}}</td>
                            <td>{{request.note}}</td>
                            <td>{{request.timeNeed | date:"dd/MM/yyyy"}}</td>
                        </tr>
                    </tbody>
                </table>
                <pagination-controls (pageChange)="resourceRequestCurrentPage = $event"></pagination-controls>
            </div>

        </div>
    </div>
</section>

<section class="content px-2">
    <div class="container-fluid">
        <div class="card">
            <div class="card-body table-responsive p-4">
                <h3>Danh sách Bill Dự án</h3>
                <table style="border-collapse: collapse;" class="table table-hover text-nowrap" [busy]="isLoading">
                    <thead class="bg-light">
                        <tr>
                            <th>STT</th>
                            <th>Nhân viên</th>
                            <th>Project</th>
                            <th>Charge Role</th>
                            <th>Charge Price</th>
                            <th>Thời gian bắt đầu charge</th>
                            <th>Thời gian kết thúc charge</th>
                            <th>is Active</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let bill of projectUserBill  |paginate:{ 
                        itemsPerPage: 10,
                        currentPage: userBillCurrentPage
                        }  ; let i = index">
                            <td><span>{{ i +1 }}</span></td>
                            <td>{{bill.userName}}</td>
                            <td>{{bill.projectName}}</td>
                            <td>{{bill.billRole}}</td>
                            <td>{{bill.billRate}}</td>
                            <td>{{bill.startTime}}</td>
                            <td>{{bill.endTime}}</td>
                            <td class="text-center">
                                <mat-checkbox disabled class="example-margin" [(ngModel)]="bill.isActive">
                                </mat-checkbox>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <pagination-controls (pageChange)="userBillCurrentPage = $event"></pagination-controls>

            </div>

        </div>
    </div>
</section>