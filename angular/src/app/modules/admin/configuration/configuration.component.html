<section class="content-header">
  <div class="container-fluid">
    <div class="row">
      <div class="col-6">
        <h1>Configuration</h1>
      </div>
    </div>
  </div>
</section>
<section class="content px-2">
  <div class="container-fluid">
    <div class="card" *ngIf="permission.isGranted(Admin_Configuartions_ViewKomuSetting)">
      <mat-expansion-panel [expanded]="isShowKomuSetting">
        <mat-expansion-panel-header (click)="isShowKomuSetting = !isShowKomuSetting"  class="panel-header">
          <mat-panel-title>
            <p class="title">{{"Komu setting"}}</p>
            <div class="edit-save" *ngIf="isShowKomuSetting">
              <button *ngIf="permission.isGranted(Admin_Configuartions_Edit)"
                class="btn bg-blue mr-3"
                (click)="isEditingKomu = !isEditingKomu;$event.stopPropagation()"
                [hidden]="isEditingKomu"
              >
                <i class="fas fa-edit"></i>
                Edit
              </button>
              <button
                class="btn bg-secondary"
                (click)="
                isEditingKomu = !isEditingKomu;
                  getSetting();
                  $event.stopPropagation()
                "
                [hidden]="!isEditingKomu"
              >
                Cancel
              </button>
              <button
              class="btn btn-primary btn-action ml-3"
              (click)="
                saveConfiguration();
                isEditingKomu = !isEditingKomu;
                $event.stopPropagation()
              "
              [hidden]="!isEditingKomu
               "
            >
              Save
            </button>
            </div>
          </mat-panel-title>
  
        </mat-expansion-panel-header>
        <div class="row">
          <div class="col-md-12">
            <mat-checkbox class="example-margin" (change)="enableNoticeToKomu($event.checked)"
              [checked]="configuration.noticeToKomu == 'true'"
              [disabled]="!isEditingKomu">
              Enable notice to Komu
            </mat-checkbox>
          </div>
          <div class="col col-12 col-md-12">
                <mat-form-field class="w-50 mt-2">
                  <input
                    placeholder="Komu Uri"
                    readonly
                    class="w-100"
                    type="text"
                    matInput
                    [(ngModel)]="configuration.komuUrl"
                    #komuUrl
                  />
                </mat-form-field>
          </div>
          <div class="col col-12 col-md-12">
                <mat-form-field class="w-50 mt-2">
                  <input
                    class="w-100"
                    type="text"
                    matInput
                    readonly
                    placeholder="Security Code"
                    [(ngModel)]="configuration.komuSecretCode"
                    #komuSecretCode
                  />
                </mat-form-field>
              
          </div>
        </div>
      </mat-expansion-panel>
    </div>

    <div class="card" *ngIf="permission.isGranted(Admin_Configuartions_ViewProjectSetting)">
      <mat-expansion-panel [expanded]="isShowProjectSetting">
        <mat-expansion-panel-header (click)="isShowProjectSetting = !isShowProjectSetting" class="panel-header">
          <mat-panel-title>
            <p class="title">{{"Project Setting"}}</p>
            <div class="edit-save" *ngIf="isShowProjectSetting">
              <a *ngIf="permission.isGranted(Admin_Configuartions_Edit)"
                href="javascript:;"
                class="btn bg-blue mr-3"
                (click)="
                  isEditSecretCode = !isEditSecretCode;
                  $event.stopPropagation()
                "
                [hidden]="isEditSecretCode"
              >
                <i class="fas fa-edit"></i>
                Edit
              </a>
              
              <a
                href="javascript:;"
                class="btn bg-secondary"
                (click)="
                  isEditSecretCode = !isEditSecretCode;
                  getSetting();
                  $event.stopPropagation()
                "
                [hidden]="!isEditSecretCode"
              >
                Cancel
              </a>
              <a
                href="javascript:;"
                class="btn btn-primary btn-action ml-3"
                (click)="
                  saveConfiguration();
                  isEditSecretCode = !isEditSecretCode;
                  $event.stopPropagation()
                "
                [hidden]="!isEditSecretCode"
              >
                Save
              </a>
            </div>
          </mat-panel-title>
  
        </mat-expansion-panel-header>
        <div class="row">
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 mt-2">
              <input
              [disabled]="!isEditSecretCode"
                class="w-100"
                type="text"
                matInput
                placeholder="Secret Code"
                [(ngModel)]="configuration.securityCode"
                #secretCode
              />
            </mat-form-field>
              
          </div>
        </div>
      </mat-expansion-panel>
    </div>

    <div class="card" *ngIf="permission.isGranted(Admin_Configuartions_ViewHrmSetting)">
      <mat-expansion-panel [expanded]="isShowHRMSetting">
        <mat-expansion-panel-header (click)="isShowHRMSetting = !isShowHRMSetting"  class="panel-header">
          <mat-panel-title>
            <p class="title">{{"HRM Setting"}}</p>
          </mat-panel-title>
  
        </mat-expansion-panel-header>
        <div class="row">
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 mt-2">
              <input
                readonly
                class="w-100"
                type="text"
                matInput
                placeholder="HRM Uri"
                [(ngModel)]="configuration.hrmUri"
                #hrmUri
              />
            </mat-form-field>
          </div>
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 mt-2">
              <input
                readonly
                class="w-100"
                type="text"
                matInput
                placeholder="Secret Code"
                [(ngModel)]="configuration.hrmSecretCode"
                #HRMSecretKey
              />
            </mat-form-field>
              
          </div>
        </div>
      </mat-expansion-panel>
    </div>

    <div class="card" *ngIf="permission.isGranted(Admin_Configuartions_ViewTimesheetSetting)">
      <mat-expansion-panel [expanded]="isShowTimesheetSetting">
        <mat-expansion-panel-header (click)="isShowTimesheetSetting = !isShowTimesheetSetting" class="panel-header">
          <mat-panel-title>
            <p class="title">{{"Timesheet Setting"}}</p>
            <div class="edit-save" *ngIf="isShowTimesheetSetting">
              <a *ngIf="permission.isGranted(Admin_Configuartions_Edit)"
                href="javascript:;"
                class="btn bg-blue mr-3"
                (click)="isEditingTimesheet = !isEditingTimesheet; $event.stopPropagation()"
                [hidden]="isEditingTimesheet"
              >
                <i class="fas fa-edit"></i>
                Edit
              </a>

              <a
                href="javascript:;"
                class="btn bg-secondary"
                (click)="
                  isEditingTimesheet = !isEditingTimesheet;
                  getSetting();
                  $event.stopPropagation()
                "
                [hidden]="!isEditingTimesheet"
              >
                Cancel
              </a>
              <a
                href="javascript:;"
                class="btn btn-primary btn-action ml-3"
                (click)="
                  saveConfiguration();
                  isEditingTimesheet = !isEditingTimesheet;
                  $event.stopPropagation()
                "
                [hidden]="!isEditingTimesheet"
              >
                Save
              </a>
            </div>
          </mat-panel-title>
  
        </mat-expansion-panel-header>
        <div class="row">
          
          <div class="col-md-12">
            <mat-checkbox class="example-margin" [disabled]="!isEditingTimesheet" (change)="enableAutoUpdateProjectInfoToTimesheetTool($event.checked)"
              [checked]="configuration.autoUpdateProjectInfoToTimesheetTool == 'true'">
              Enable Auto update project info to timesheet tool
            </mat-checkbox>
          </div>
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 mt-2">
              <input
                readonly
                class="w-100"
                type="text"
                matInput
                placeholder="Timesheet Uri"
                [(ngModel)]="configuration.timesheetUri"
                #timesheetUri
              />
            </mat-form-field>
          </div>
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 mt-2">
              <input
                readonly
                class="w-100"
                type="text"
                matInput
                placeholder="Secret Code"
                [(ngModel)]="configuration.timesheetSecretCode"
                #timesheetSecretKey
              />
            </mat-form-field>
              
          </div>
        </div>
      </mat-expansion-panel>
    </div>

    <div class="card" *ngIf="permission.isGranted(Admin_Configuartions_ViewFinanceSetting)">
      <mat-expansion-panel [expanded]="isShowFinanceSetting">
        <mat-expansion-panel-header (click)="isShowFinanceSetting = !isShowFinanceSetting"  class="panel-header">
          <mat-panel-title>
            <p class="title">{{"Finance Setting"}}</p>
          </mat-panel-title>
  
        </mat-expansion-panel-header>
        <div class="row">
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 mt-2">
              <input
                readonly
                class="w-100"
                type="text"
                matInput
                placeholder="Finance Uri"
                [(ngModel)]="configuration.financeUri"
                #financeUri
              />
            </mat-form-field>
          </div>
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 mt-2">
              <input
                readonly
                class="w-100"
                type="text"
                matInput
                placeholder="Secret Code"
                [(ngModel)]="configuration.financeSecretCode"
                #financeSecretKey
              />
            </mat-form-field>
          </div>
        </div>
      </mat-expansion-panel>
    </div>


    <div class="card" *ngIf="permission.isGranted(Admin_Configuartions_ViewGoogleClientAppSetting)">
      <mat-expansion-panel [expanded]="isShowGoogleClientApp">
        <mat-expansion-panel-header (click)="isShowGoogleClientApp =!isShowGoogleClientApp" class="panel-header">
          <mat-panel-title>
            <p class="title">{{"GoogleClient App"}}</p>
            <div class="edit-save" *ngIf="isShowGoogleClientApp">
              <a *ngIf="permission.isGranted(Admin_Configuartions_Edit)"
                href="javascript:;"
                class="btn bg-blue mr-3"
                (click)="isEditClientId = !isEditClientId; clientId.focus();$event.stopPropagation()"
                [hidden]="isEditClientId"
              >
                <i class="fas fa-edit"></i>
                Edit
              </a>
              <a
                href="javascript:;"
                class="btn bg-secondary"
                (click)="isEditClientId = !isEditClientId; getSetting();$event.stopPropagation()"
                [hidden]="!isEditClientId"
              >
                Cancel
              </a>
              <a
              href="javascript:;"
              class="btn btn-primary btn-action ml-3"
              (click)="saveConfiguration(); isEditClientId = !isEditClientId;$event.stopPropagation()"
              [hidden]="!isEditClientId"
            >
              Save
            </a>
            </div>
          </mat-panel-title>
  
        </mat-expansion-panel-header>
        <div class="row">
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 ml-1">
              <input
                [disabled]="!isEditClientId"
                class="w-100"
                type="text"
                matInput
                placeholder="GoogleClient App"
                [(ngModel)]="configuration.clientAppId"
                #clientId
              />
            </mat-form-field>
          </div>
        </div>
      </mat-expansion-panel>
    </div>

    <div class="card" *ngIf="permission.isGranted(Admin_Configuartions_ViewDefaultWorkingHourPerDaySetting)">
      <mat-expansion-panel [expanded]="isShowDefaultWorking">
        <mat-expansion-panel-header (click)="isShowDefaultWorking = !isShowDefaultWorking" class="panel-header">
          <mat-panel-title>
            <p class="title">{{"Default working hours per day"}}</p>
            <div class="edit-save" *ngIf="isShowDefaultWorking">
              <a *ngIf="permission.isGranted(Admin_Configuartions_Edit)"
                href="javascript:;"
                class="btn bg-blue mr-3"
                (click)="
                  isEditDefaultWorkingHours = !isEditDefaultWorkingHours;
                  clientId.focus();$event.stopPropagation()
                "
                [hidden]="isEditDefaultWorkingHours"
              >
                <i class="fas fa-edit"></i>
                Edit
              </a>
              
              <a
                href="javascript:;"
                class="btn bg-secondary"
                (click)="
                  isEditDefaultWorkingHours = !isEditDefaultWorkingHours;
                  getSetting();$event.stopPropagation()
                "
                [hidden]="!isEditDefaultWorkingHours"
              >
                Cancel
              </a>
              <a
                href="javascript:;"
                class="btn btn-primary btn-action ml-3"
                (click)="
                  saveConfiguration();
                  isEditDefaultWorkingHours = !isEditDefaultWorkingHours;$event.stopPropagation()
                "
                [hidden]="!isEditDefaultWorkingHours"
              >
                Save
              </a>
            </div>
          </mat-panel-title>
  
        </mat-expansion-panel-header>
        <div class="row">
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 ml-1">
              <input
                [disabled]="!isEditDefaultWorkingHours"
                class="w-100"
                type="text"
                placeholder="Working hours per day"
                matInput
                [(ngModel)]="configuration.defaultWorkingHours"
                #clientId
              />
            </mat-form-field>
          </div>
        </div>
      </mat-expansion-panel>
    </div>
  </div>
</section>
