<section class="content-header">
  <div class="container-fluid">
    <div class="row">
      <div class="col-6">
        <h1>Configuration</h1>
      </div>
    </div>
  </div>
</section>
<section class="content px-2">
  <div class="container-fluid">
    <div class="card">
      <mat-expansion-panel [expanded]="isShowKomuSetting">
        <mat-expansion-panel-header (click)="isShowKomuSetting = !isShowKomuSetting"  class="panel-header">
          <mat-panel-title>
            <p class="title">{{"Komu setting"}}</p>
            <div class="edit-save" *ngIf="isShowKomuSetting">
              <button
                class="btn bg-blue mr-3"
                (click)="
                  isEditKomuUrl = !isEditKomuUrl;
                  isEditKomuSecretCode = !isEditKomuSecretCode;
                  komuUrl.focus();
                  $event.stopPropagation()
           
                "
                [hidden]="isEditKomuUrl"
              >
                <i class="fas fa-edit"></i>
                Edit
              </button>
              <button
                class="btn bg-secondary"
                (click)="
                  isEditKomuUrl = !isEditKomuUrl;
                  isEditKomuSecretCode = !isEditKomuSecretCode;
                  getSetting();
                  $event.stopPropagation()
                "
                [hidden]="!isEditKomuUrl"
              >
                Cancel
              </button>
              <button
              class="btn btn-primary btn-action ml-3"
              (click)="
                saveConfiguration();
                isEditKomuUrl = !isEditKomuUrl;
                isEditKomuSecretCode = !isEditKomuSecretCode;
                $event.stopPropagation()
              "
              [hidden]="!isEditKomuUrl"
            >
              Save
            </button>
            </div>
          </mat-panel-title>
  
        </mat-expansion-panel-header>
        <div class="row">
          <div class="col-md-12">
            <mat-checkbox class="example-margin" (change)="enableNoticeToKomu($event.checked)"
              [checked]="configuration.noticeToKomu == 'true'"
              [disabled]="!isEditKomuSecretCode && !isEditKomuUrl">
              Enable notice to Komu
            </mat-checkbox>
          </div>
          <div class="col col-12 col-md-12">
                <mat-form-field class="w-50 mt-2">
                  <input
                    placeholder="Komu Uri"
                    [disabled]="!isEditKomuUrl"
                    class="w-100"
                    type="text"
                    matInput
                    [disabled]="!checkNoticeToKomu()"
                    [(ngModel)]="configuration.komuUrl"
                    #komuUrl
                  />
                </mat-form-field>
          </div>
          <div class="col col-12 col-md-12">
                <mat-form-field class="w-50 mt-2">
                  <input
                    [disabled]="!isEditKomuSecretCode"
                    class="w-100"
                    type="text"
                    matInput
                    [disabled]="!checkNoticeToKomu()"
                    placeholder="Security Code"
                    [(ngModel)]="configuration.komuSecretCode"
                    #komuSecretCode
                  />
                </mat-form-field>
              
          </div>
        </div>
      </mat-expansion-panel>
    </div>

    <div class="card">
      <mat-expansion-panel [expanded]="isShowProjectSetting">
        <mat-expansion-panel-header (click)="isShowProjectSetting = !isShowProjectSetting" class="panel-header">
          <mat-panel-title>
            <p class="title">{{"Project Setting"}}</p>
            <div class="edit-save" *ngIf="isShowProjectSetting">
              <a
                href="javascript:;"
                class="btn bg-blue mr-3"
                (click)="
                  isEditSecretCode = !isEditSecretCode;
                  isEditProjectUri = !isEditProjectUri;
                  projectUri.focus();
                  $event.stopPropagation()
                "
                [hidden]="isEditProjectUri"
              >
                <i class="fas fa-edit"></i>
                Edit
              </a>
              
              <a
                href="javascript:;"
                class="btn bg-secondary"
                (click)="
                  isEditSecretCode = !isEditSecretCode;
                  isEditProjectUri = !isEditProjectUri;
                  getSetting();
                  $event.stopPropagation()
                "
                [hidden]="!isEditProjectUri"
              >
                Cancel
              </a>
              <a
                href="javascript:;"
                class="btn btn-primary btn-action ml-3"
                (click)="
                  saveConfiguration();
                  isEditSecretCode = !isEditSecretCode;
                  isEditProjectUri = !isEditProjectUri;
                  $event.stopPropagation()
                "
                [hidden]="!isEditProjectUri"
              >
                Save
              </a>
    
            </div>
          </mat-panel-title>
  
        </mat-expansion-panel-header>
        <div class="row">
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 mt-2">
              <input
                [disabled]="!isEditProjectUri"
                class="w-100"
                type="text"
                matInput
                placeholder="Project Uri"
                [(ngModel)]="configuration.projectUri"
                #projectUri
              />
            </mat-form-field>
          </div>
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 mt-2">
              <input
                [disabled]="!isEditSecretCode"
                class="w-100"
                type="text"
                matInput
                placeholder="Secret Code"
                [(ngModel)]="configuration.securityCode"
                #secretCode
              />
            </mat-form-field>
              
          </div>
        </div>
      </mat-expansion-panel>
    </div>

    <div class="card">
      <mat-expansion-panel [expanded]="isShowHRMSetting">
        <mat-expansion-panel-header (click)="isShowHRMSetting = !isShowHRMSetting"  class="panel-header">
          <mat-panel-title>
            <p class="title">{{"HRM Setting"}}</p>
            <div class="edit-save" *ngIf="isShowHRMSetting">
              <a
                href="javascript:;"
                class="btn bg-blue mr-3"
                (click)="
                  isEditHRM = !isEditHRM;
                  isEditHRMSecretKey = !isEditHRMSecretKey;
                  hrmUri.focus();
                  $event.stopPropagation()
                "
                [hidden]="isEditHRM"
              >
                <i class="fas fa-edit"></i>
                Edit
              </a>
    
              <a
                href="javascript:;"
                class="btn bg-secondary"
                (click)="
                  isEditHRM = !isEditHRM;
                  isEditHRMSecretKey = !isEditHRMSecretKey;
                  getSetting();
                  $event.stopPropagation()
                "
                [hidden]="!isEditHRM"
              >
                Cancel
              </a>
              <a
              href="javascript:;"
              class="btn btn-primary btn-action ml-3"
              (click)="
                saveConfiguration();
                isEditHRM = !isEditHRM;
                isEditHRMSecretKey = !isEditHRMSecretKey;
                $event.stopPropagation()
              "
              [hidden]="!isEditHRM"
            >
              Save
            </a>
            </div>
          </mat-panel-title>
  
        </mat-expansion-panel-header>
        <div class="row">
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 mt-2">
              <input
                [disabled]="!isEditHRM"
                class="w-100"
                type="text"
                matInput
                placeholder="HRM Uri"
                [(ngModel)]="configuration.hrmUri"
                #hrmUri
              />
            </mat-form-field>
          </div>
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 mt-2">
              <input
                [disabled]="!isEditHRMSecretKey"
                class="w-100"
                type="text"
                matInput
                placeholder="Secret Code"
                [(ngModel)]="configuration.hrmSecretCode"
                #HRMSecretKey
              />
            </mat-form-field>
              
          </div>
        </div>
      </mat-expansion-panel>
    </div>

    <div class="card">
      <mat-expansion-panel [expanded]="isShowTimesheetSetting">
        <mat-expansion-panel-header (click)="isShowTimesheetSetting = !isShowTimesheetSetting" class="panel-header">
          <mat-panel-title>
            <p class="title">{{"Timesheet Setting"}}</p>
            <div class="edit-save" *ngIf="isShowTimesheetSetting">
              <a
                href="javascript:;"
                class="btn bg-blue mr-3"
                (click)="
                  isEditTimesheetSecretKey = !isEditTimesheetSecretKey;
                  isEditTimesheetUri = !isEditTimesheetUri;
                  timesheetUri.focus();
                  $event.stopPropagation()
                "
                [hidden]="isEditTimesheetUri"
              >
                <i class="fas fa-edit"></i>
                Edit
              </a>

              <a
                href="javascript:;"
                class="btn bg-secondary"
                (click)="
                  isEditTimesheetSecretKey = !isEditTimesheetSecretKey;
                  isEditTimesheetUri = !isEditTimesheetUri;
                  getSetting();
                  $event.stopPropagation()
                "
                [hidden]="!isEditTimesheetUri"
              >
                Cancel
              </a>
              <a
                href="javascript:;"
                class="btn btn-primary btn-action ml-3"
                (click)="
                  saveConfiguration();
                  isEditTimesheetSecretKey = !isEditTimesheetSecretKey;
                  isEditTimesheetUri = !isEditTimesheetUri;
                  $event.stopPropagation()
                "
                [hidden]="!isEditTimesheetUri"
              >
                Save
              </a>
            </div>
          </mat-panel-title>
  
        </mat-expansion-panel-header>
        <div class="row">
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 mt-2">
              <input
                [disabled]="!isEditTimesheetUri"
                class="w-100"
                type="text"
                matInput
                placeholder="Timesheet Uri"
                [(ngModel)]="configuration.timesheetUri"
                #timesheetUri
              />
            </mat-form-field>
          </div>
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 mt-2">
              <input
                [disabled]="!isEditTimesheetSecretKey"
                class="w-100"
                type="text"
                matInput
                placeholder="Secret Code"
                [(ngModel)]="configuration.timesheetSecretCode"
                #timesheetSecretKey
              />
            </mat-form-field>
              
          </div>

          <div class="col-md-12">
            <mat-checkbox class="example-margin" (change)="enableAutoUpdateProjectInfoToTimesheetTool($event.checked)"
              [checked]="configuration.autoUpdateProjectInfoToTimesheetTool == 'true'">
              Enable Auto update project info to timesheet tool
            </mat-checkbox>
          </div>
        </div>
      </mat-expansion-panel>
    </div>

    <div class="card">
      <mat-expansion-panel [expanded]="isShowFinanceSetting">
        <mat-expansion-panel-header (click)="isShowFinanceSetting = !isShowFinanceSetting"  class="panel-header">
          <mat-panel-title>
            <p class="title">{{"Finance Setting"}}</p>
            <div class="edit-save" *ngIf="isShowFinanceSetting">
              <a
                href="javascript:;"
                class="btn bg-blue mr-3"
                (click)="
                  isEditFinanceSecretKey = !isEditFinanceSecretKey;
                  isEditFinanceUri = !isEditFinanceUri;
                  financeUri.focus();
                  $event.stopPropagation()
                "
                [hidden]="isEditFinanceUri"
              >
                <i class="fas fa-edit"></i>
                Edit
              </a>
              <a
                href="javascript:;"
                class="btn bg-secondary"
                (click)="
                  isEditFinanceSecretKey = !isEditFinanceSecretKey;
                  isEditFinanceUri = !isEditFinanceUri;
                  getSetting();
                  $event.stopPropagation()
                "
                [hidden]="!isEditFinanceUri"
              >
                Cancel
              </a>
              <a
                href="javascript:;"
                class="btn btn-primary btn-action ml-3"
                (click)="
                  saveConfiguration();
                  isEditFinanceSecretKey = !isEditFinanceSecretKey;
                  isEditFinanceUri = !isEditFinanceUri;
                  $event.stopPropagation()
                "
                [hidden]="!isEditFinanceUri"
              >
                Save
              </a>
            </div>
          </mat-panel-title>
  
        </mat-expansion-panel-header>
        <div class="row">
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 mt-2">
              <input
                [disabled]="!isEditFinanceUri"
                class="w-100"
                type="text"
                matInput
                placeholder="Finance Uri"
                [(ngModel)]="configuration.financeUri"
                #financeUri
              />
            </mat-form-field>
          </div>
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 mt-2">
              <input
                [disabled]="!isEditFinanceSecretKey"
                class="w-100"
                type="text"
                matInput
                placeholder="Secret Code"
                [(ngModel)]="configuration.financeSecretCode"
                #financeSecretKey
              />
            </mat-form-field>
          </div>
        </div>
      </mat-expansion-panel>
    </div>

    <div class="card">
      <mat-expansion-panel [expanded]="isShowSendReportSetting">
        <mat-expansion-panel-header (click)="isShowSendReportSetting = !isShowSendReportSetting" class="panel-header">
          <mat-panel-title>
            <p class="title">{{"Send Report Setting"}}</p>
            <div class="edit-save" *ngIf="isShowSendReportSetting">
              <a
                href="javascript:;"
                class="btn bg-blue mr-3"
                (click)="
                  isEditCanSendDay = !isEditCanSendDay;
                  isEditCanSendHour = !isEditCanSendHour;
                  isEditExpiredDay = !isEditExpiredDay;
                  isEditExpiredHour = !isEditExpiredHour;
                  canSendDay.focus();
                  $event.stopPropagation()
                "
                [hidden]="isEditCanSendDay"
              >
                <i class="fas fa-edit"></i>
                Edit
              </a>

              <a
                href="javascript:;"
                class="btn bg-secondary"
                (click)="
                  isEditCanSendDay = !isEditCanSendDay;
                  isEditCanSendHour = !isEditCanSendHour;
                  isEditExpiredDay = !isEditExpiredDay;
                  isEditExpiredHour = !isEditExpiredHour;
                  getSetting();
                  $event.stopPropagation()
                "
                [hidden]="!isEditCanSendDay"
              >
                Cancel
              </a>
              <a
              href="javascript:;"
              class="btn btn-primary btn-action ml-3"
              (click)="
                saveConfiguration();
                isEditCanSendDay = !isEditCanSendDay;
                isEditCanSendHour = !isEditCanSendHour;
                isEditExpiredDay = !isEditExpiredDay;
                isEditExpiredHour = !isEditExpiredHour;
                $event.stopPropagation()
              "
              [hidden]="!isEditCanSendDay"
            >
              Save
            </a>
  
            </div>
          </mat-panel-title>
  
        </mat-expansion-panel-header>
        <div class="row"> 
          <div class="col col-md-6 col-xs-12 mb-2">
            <div style="border: 1px solid #2b2828; padding: 0 15px;">
              <p style="padding : 10px 0 0 0; font-size: 18px; font-weight: 200;">{{"Can Send Time"}}</p>
              <div class="row">
                <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                  <mat-form-field class="mb-2">
                
                    <mat-select
                      [disabled]="!isEditCanSendDay"
                      class="w-100"
                      [(ngModel)]="configuration.canSendDay"
                      #canSendDay
                      placeholder="Day"
                    >
                      <mat-option *ngFor="let day of listDays" [value]="day.value">
                        {{ day.text }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                  <mat-form-field class="mb-2">
                    <mat-select
                      [disabled]="!isEditCanSendHour"
                      class="w-100"
                      [(ngModel)]="configuration.canSendHour"
                      #canSendHour
                      placeholder="Hour"
                    >
                      <mat-option
                        *ngFor="let hour of listHours"
                        [value]="hour.value"
                      >
                        {{ hour.text }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
                
              </div>
            </div>
          </div>
          <div class="col col-lg-6 col-md-6 col-xs-12">
            <div style="border: 1px solid #2b2828; padding: 0 15px;">
              <p style="padding : 10px 0 0 0;font-size: 18px; font-weight: 200;">{{"Expired Time"}}</p>
              <div class="row">
                <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                  <mat-form-field class="mb-2">
                
                    <mat-select
                    [disabled]="!isEditExpiredDay"
                    class="w-100"
                    [(ngModel)]="configuration.expiredDay"
                    #expiredDay
                    placeholder="Day"
                  >
                    <mat-option *ngFor="let day of listDays" [value]="day.value">
                      {{ day.text }}
                    </mat-option>
                  </mat-select>
                  </mat-form-field>
                </div>
                <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                  <mat-form-field class="mb-2">
                    <mat-select
                    [disabled]="!isEditExpiredHour"
                    class="w-100"
                    [(ngModel)]="configuration.expiredHour"
                    #expiredHour
                    placeholder="Hour"
                  >
                    <mat-option
                      *ngFor="let hour of listHours"
                      [value]="hour.value"
                    >
                      {{ hour.text }}
                    </mat-option>
                  </mat-select>
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>
        </div>
      </mat-expansion-panel>
    </div>

    <div class="card">
      <mat-expansion-panel [expanded]="isShowGoogleClientApp">
        <mat-expansion-panel-header (click)="isShowGoogleClientApp =!isShowGoogleClientApp" class="panel-header">
          <mat-panel-title>
            <p class="title">{{"GoogleClient App"}}</p>
            <div class="edit-save" *ngIf="isShowGoogleClientApp">
              <a
                href="javascript:;"
                class="btn bg-blue mr-3"
                (click)="isEditClientId = !isEditClientId; clientId.focus();$event.stopPropagation()"
                [hidden]="isEditClientId"
              >
                <i class="fas fa-edit"></i>
                Edit
              </a>
              <a
                href="javascript:;"
                class="btn bg-secondary"
                (click)="isEditClientId = !isEditClientId; getSetting();$event.stopPropagation()"
                [hidden]="!isEditClientId"
              >
                Cancel
              </a>
              <a
              href="javascript:;"
              class="btn btn-primary btn-action ml-3"
              (click)="saveConfiguration(); isEditClientId = !isEditClientId;$event.stopPropagation()"
              [hidden]="!isEditClientId"
            >
              Save
            </a>
            </div>
          </mat-panel-title>
  
        </mat-expansion-panel-header>
        <div class="row">
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 ml-1">
              <input
                [disabled]="!isEditClientId"
                class="w-100"
                type="text"
                matInput
                placeholder="GoogleClient App"
                [(ngModel)]="configuration.clientAppId"
                #clientId
              />
            </mat-form-field>
          </div>
        </div>
      </mat-expansion-panel>
    </div>

    <div class="card">
      <mat-expansion-panel [expanded]="isShowDefaultWorking">
        <mat-expansion-panel-header (click)="isShowDefaultWorking = !isShowDefaultWorking" class="panel-header">
          <mat-panel-title>
            <p class="title">{{"Default working hours per day"}}</p>
            <div class="edit-save" *ngIf="isShowDefaultWorking">
              <a
                href="javascript:;"
                class="btn bg-blue mr-3"
                (click)="
                  isEditDefaultWorkingHours = !isEditDefaultWorkingHours;
                  clientId.focus();$event.stopPropagation()
                "
                [hidden]="isEditDefaultWorkingHours"
              >
                <i class="fas fa-edit"></i>
                Edit
              </a>
              
              <a
                href="javascript:;"
                class="btn bg-secondary"
                (click)="
                  isEditDefaultWorkingHours = !isEditDefaultWorkingHours;
                  getSetting();$event.stopPropagation()
                "
                [hidden]="!isEditDefaultWorkingHours"
              >
                Cancel
              </a>
              <a
                href="javascript:;"
                class="btn btn-primary btn-action ml-3"
                (click)="
                  saveConfiguration();
                  isEditDefaultWorkingHours = !isEditDefaultWorkingHours;$event.stopPropagation()
                "
                [hidden]="!isEditDefaultWorkingHours"
              >
                Save
              </a>
            </div>
          </mat-panel-title>
  
        </mat-expansion-panel-header>
        <div class="row">
          <div class="col col-12 col-md-12">
            <mat-form-field class="w-50 ml-1">
              <input
                [disabled]="!isEditDefaultWorkingHours"
                class="w-100"
                type="text"
                placeholder="Working hours per day"
                matInput
                [(ngModel)]="configuration.defaultWorkingHours"
                #clientId
              />
            </mat-form-field>
          </div>
        </div>
      </mat-expansion-panel>
    </div>
  </div>
</section>
